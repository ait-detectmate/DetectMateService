{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"DetectMate Service Framework Welcome to the DetectMate Service Framework documentation. DetectMate is a flexible, component-based framework for building distributed detection and processing services. It uses NNG's messaging architecture to process data in real-time. Key features Modular design : easily extensible with custom processors and components. Resilient networking : built on top of pynng (NNG) for high-performance messaging. Configurable : fully configurable via YAML files or environment variables. Service management : built-in CLI for starting, stopping, and monitoring the service. Scalable : run multiple independent service instances. Getting started Check out the Installation guide to set up the service, and then proceed to Configuration and Usage to learn how to run it.","title":"Home"},{"location":"#detectmate-service-framework","text":"Welcome to the DetectMate Service Framework documentation. DetectMate is a flexible, component-based framework for building distributed detection and processing services. It uses NNG's messaging architecture to process data in real-time.","title":"DetectMate Service Framework"},{"location":"#key-features","text":"Modular design : easily extensible with custom processors and components. Resilient networking : built on top of pynng (NNG) for high-performance messaging. Configurable : fully configurable via YAML files or environment variables. Service management : built-in CLI for starting, stopping, and monitoring the service. Scalable : run multiple independent service instances.","title":"Key features"},{"location":"#getting-started","text":"Check out the Installation guide to set up the service, and then proceed to Configuration and Usage to learn how to run it.","title":"Getting started"},{"location":"configuration/","text":"Configuration DetectMateService can be configured using a YAML settings file or environment variables. Environment variables take precedence over the YAML file. Service settings These settings control the service infrastructure. Setting Env Variable Default Description component_name DETECTMATE_COMPONENT_NAME None A human-readable name for the service instance. component_id DETECTMATE_COMPONENT_ID None (computed) Unique identifier for the component; computed automatically if not provided. component_type DETECTMATE_COMPONENT_TYPE core Python import path for the component class (e.g., detectors.MyDetector ). component_config_class DETECTMATE_COMPONENT_CONFIG_CLASS None Python import path of the configuration class used by the component (e.g., detectors.MyDetectorConfig ). log_level DETECTMATE_LOG_LEVEL INFO Logging level ( DEBUG , INFO , WARNING , ERROR ). log_dir DETECTMATE_LOG_DIR ./logs Directory for log files. log_to_console DETECTMATE_LOG_TO_CONSOLE true Whether logs are written to stdout/stderr. log_to_file DETECTMATE_LOG_TO_FILE true Whether logs are written to files in log_dir . manager_addr DETECTMATE_MANAGER_ADDR ipc:///tmp/detectmate.cmd.ipc Address for management commands (REQ/REP). manager_recv_timeout DETECTMATE_MANAGER_RECV_TIMEOUT 100 Receive timeout (ms) for the manager command channel. manager_thread_join_timeout DETECTMATE_MANAGER_THREAD_JOIN_TIMEOUT 1.0 Timeout (s) when waiting for the manager thread to stop. engine_addr DETECTMATE_ENGINE_ADDR ipc:///tmp/detectmate.engine.ipc Address for data processing (PAIR0/1). engine_autostart DETECTMATE_ENGINE_AUTOSTART true Whether the engine channel is started automatically. engine_recv_timeout DETECTMATE_ENGINE_RECV_TIMEOUT 100 Receive timeout (ms) for the engine channel. out_addr DETECTMATE_OUT_ADDR [] List of output addresses (strongly typed NNG URLs). out_dial_timeout DETECTMATE_OUT_DIAL_TIMEOUT 1000 Timeout (ms) for connecting to output addresses. YAML files You can provide a YAML file containing the service settings. Below is an example settings.yaml : component_name: \"my-detector\" log_level: \"DEBUG\" log_dir: \"./logs\" # Manager Interface (Command Channel) manager_addr: \"ipc:///tmp/detectmate.cmd.ipc\" # Engine Interface (Data Channel) engine_addr: \"ipc:///tmp/detectmate.engine.ipc\" engine_autostart: true # Output Destinations (where processed data is sent) out_addr: - \"tcp://127.0.0.1:5000\" - \"ipc:///tmp/output.ipc\" out_dial_timeout: 1000 Environment variables Environment variables override values in the YAML file. They are prefixed with DETECTMATE_ . Example: export DETECTMATE_LOG_LEVEL=DEBUG export DETECTMATE_COMPONENT_NAME=worker-1 detectmate start Component configuration In addition to the service settings (which configure the runner ), you can also pass a separate configuration file for the specific component logic (e.g., detector parameters) using the --config flag in the CLI. This file is specific to the implementation of the component you are running. # detector-config.yaml threshold: 0.85 sensitivity: high enabled: true You can read more about Components in the Using a Library Component section.","title":"Configuration"},{"location":"configuration/#configuration","text":"DetectMateService can be configured using a YAML settings file or environment variables. Environment variables take precedence over the YAML file.","title":"Configuration"},{"location":"configuration/#service-settings","text":"These settings control the service infrastructure. Setting Env Variable Default Description component_name DETECTMATE_COMPONENT_NAME None A human-readable name for the service instance. component_id DETECTMATE_COMPONENT_ID None (computed) Unique identifier for the component; computed automatically if not provided. component_type DETECTMATE_COMPONENT_TYPE core Python import path for the component class (e.g., detectors.MyDetector ). component_config_class DETECTMATE_COMPONENT_CONFIG_CLASS None Python import path of the configuration class used by the component (e.g., detectors.MyDetectorConfig ). log_level DETECTMATE_LOG_LEVEL INFO Logging level ( DEBUG , INFO , WARNING , ERROR ). log_dir DETECTMATE_LOG_DIR ./logs Directory for log files. log_to_console DETECTMATE_LOG_TO_CONSOLE true Whether logs are written to stdout/stderr. log_to_file DETECTMATE_LOG_TO_FILE true Whether logs are written to files in log_dir . manager_addr DETECTMATE_MANAGER_ADDR ipc:///tmp/detectmate.cmd.ipc Address for management commands (REQ/REP). manager_recv_timeout DETECTMATE_MANAGER_RECV_TIMEOUT 100 Receive timeout (ms) for the manager command channel. manager_thread_join_timeout DETECTMATE_MANAGER_THREAD_JOIN_TIMEOUT 1.0 Timeout (s) when waiting for the manager thread to stop. engine_addr DETECTMATE_ENGINE_ADDR ipc:///tmp/detectmate.engine.ipc Address for data processing (PAIR0/1). engine_autostart DETECTMATE_ENGINE_AUTOSTART true Whether the engine channel is started automatically. engine_recv_timeout DETECTMATE_ENGINE_RECV_TIMEOUT 100 Receive timeout (ms) for the engine channel. out_addr DETECTMATE_OUT_ADDR [] List of output addresses (strongly typed NNG URLs). out_dial_timeout DETECTMATE_OUT_DIAL_TIMEOUT 1000 Timeout (ms) for connecting to output addresses.","title":"Service settings"},{"location":"configuration/#yaml-files","text":"You can provide a YAML file containing the service settings. Below is an example settings.yaml : component_name: \"my-detector\" log_level: \"DEBUG\" log_dir: \"./logs\" # Manager Interface (Command Channel) manager_addr: \"ipc:///tmp/detectmate.cmd.ipc\" # Engine Interface (Data Channel) engine_addr: \"ipc:///tmp/detectmate.engine.ipc\" engine_autostart: true # Output Destinations (where processed data is sent) out_addr: - \"tcp://127.0.0.1:5000\" - \"ipc:///tmp/output.ipc\" out_dial_timeout: 1000","title":"YAML files"},{"location":"configuration/#environment-variables","text":"Environment variables override values in the YAML file. They are prefixed with DETECTMATE_ . Example: export DETECTMATE_LOG_LEVEL=DEBUG export DETECTMATE_COMPONENT_NAME=worker-1 detectmate start","title":"Environment variables"},{"location":"configuration/#component-configuration","text":"In addition to the service settings (which configure the runner ), you can also pass a separate configuration file for the specific component logic (e.g., detector parameters) using the --config flag in the CLI. This file is specific to the implementation of the component you are running. # detector-config.yaml threshold: 0.85 sensitivity: high enabled: true You can read more about Components in the Using a Library Component section.","title":"Component configuration"},{"location":"installation/","text":"Installation First, clone DetectMateService and navigate into the repository: git clone https://github.com/ait-detectmate/DetectMateService.git cd DetectMateService Setup with uv (recommended) We recommend using uv to manage the environment and dependencies. 1. Download the dependencies uv sync Alternative setup with pip If you prefer plain pip , you can set things up like this instead: # Create a virtual environment python -m venv .venv # Activate it source .venv/bin/activate # Install the project in editable mode with dev dependencies pip install . Developer setup For development, you can install with optional dependencies: uv sync --dev We recommend using prek to manage Git pre-commit hooks. prek is configured via the existing .pre-commit-config.yaml and can be installed as part of the dev extras. To ensure pre-commit hooks run before each commit, run: uv run prek install","title":"Installation"},{"location":"installation/#installation","text":"First, clone DetectMateService and navigate into the repository: git clone https://github.com/ait-detectmate/DetectMateService.git cd DetectMateService","title":"Installation"},{"location":"installation/#setup-with-uv-recommended","text":"We recommend using uv to manage the environment and dependencies.","title":"Setup with uv (recommended)"},{"location":"installation/#1-download-the-dependencies","text":"uv sync","title":"1. Download the dependencies"},{"location":"installation/#alternative-setup-with-pip","text":"If you prefer plain pip , you can set things up like this instead: # Create a virtual environment python -m venv .venv # Activate it source .venv/bin/activate # Install the project in editable mode with dev dependencies pip install .","title":"Alternative setup with pip"},{"location":"installation/#developer-setup","text":"For development, you can install with optional dependencies: uv sync --dev We recommend using prek to manage Git pre-commit hooks. prek is configured via the existing .pre-commit-config.yaml and can be installed as part of the dev extras. To ensure pre-commit hooks run before each commit, run: uv run prek install","title":"Developer setup"},{"location":"library/","text":"Using a Library Component The Service can be run as any component imported from the DetectMateLibrary . For this, ensure that the library is installed in the same activated virtual environment, where the service is installed. 1. Update settings Modify settings.yaml to use a library component: component_name: random-detector component_type: detectors.RandomDetector component_config_class: detectors.RandomDetectorConfig config_file: detector-config.yaml log_level: INFO manager_addr: ipc:///tmp/detectmate.cmd.ipc engine_addr: ipc:///tmp/detectmate.engine.ipc 2. Create component configuration Create detector-config.yaml : threshold: 0.75 window_size: 10 enabled: true 3. Start with configuration detectmate start --settings settings.yaml --config detector-config.yaml 4. Reconfigure at runtime Create new-config.yaml : threshold: 0.85 window_size: 15 enabled: true The service supports dynamic reconfiguration with two modes: 1. In-memory update (default) Changes are applied to the running service but not saved to disk. The changes will be lost when the service restarts. detectmate reconfigure --settings settings.yaml --config new-config.yaml 2. Persistent update (with --persist flag) Changes are applied to the running service AND saved to the original parameter file. The changes persist across service restarts. detectmate reconfigure --settings settings.yaml --config new-config.yaml --persist Note: The --persist flag will overwrite the original parameter file specified in your service configuration with the new values from the --params file.","title":"Using a Library Component"},{"location":"library/#using-a-library-component","text":"The Service can be run as any component imported from the DetectMateLibrary . For this, ensure that the library is installed in the same activated virtual environment, where the service is installed.","title":"Using a Library Component"},{"location":"library/#1-update-settings","text":"Modify settings.yaml to use a library component: component_name: random-detector component_type: detectors.RandomDetector component_config_class: detectors.RandomDetectorConfig config_file: detector-config.yaml log_level: INFO manager_addr: ipc:///tmp/detectmate.cmd.ipc engine_addr: ipc:///tmp/detectmate.engine.ipc","title":"1. Update settings"},{"location":"library/#2-create-component-configuration","text":"Create detector-config.yaml : threshold: 0.75 window_size: 10 enabled: true","title":"2. Create component configuration"},{"location":"library/#3-start-with-configuration","text":"detectmate start --settings settings.yaml --config detector-config.yaml","title":"3. Start with configuration"},{"location":"library/#4-reconfigure-at-runtime","text":"Create new-config.yaml : threshold: 0.85 window_size: 15 enabled: true The service supports dynamic reconfiguration with two modes:","title":"4. Reconfigure at runtime"},{"location":"library/#1-in-memory-update-default","text":"Changes are applied to the running service but not saved to disk. The changes will be lost when the service restarts. detectmate reconfigure --settings settings.yaml --config new-config.yaml","title":"1. In-memory update (default)"},{"location":"library/#2-persistent-update-with-persist-flag","text":"Changes are applied to the running service AND saved to the original parameter file. The changes persist across service restarts. detectmate reconfigure --settings settings.yaml --config new-config.yaml --persist Note: The --persist flag will overwrite the original parameter file specified in your service configuration with the new values from the --params file.","title":"2. Persistent update (with --persist flag)"},{"location":"pipeline/","text":"Running the Docker Pipeline There is a containerized demonstration of the DetectMate log analysis pipeline. The demo runs three services (reader, parser, detector) that process audit logs to detect anomalies, with a test script that feeds log lines through the complete pipeline and reports detected anomalies. Each component runs in its own Docker container and the components communicate via TCP. This document explains how to run the example pipeline using Docker, located in the demo folder. Components The pipeline consists of the following services defined in demo/docker-compose.yml : Reader ( detectmate_reader ) : reads log lines from a source file ( demo/data/audit.log ) uses demo/config/reader_config.yaml listens on internal port 8001 Parser ( detectmate_parser ) : receives raw log data, parses it into a structured format uses demo/config/parser_config.yaml listens on internal port 8011 depends on the Reader Detector ( detectmate_detector ) : analyzes structured logs to detect anomalies uses demo/config/detector_config.yaml listens on internal port 8021 depends on the Parser Demo Driver ( detectmate_demo ) : Acts as the orchestrator/client. It executes the demo/manual_demo_run_tcp.py script. It does the following: count lines in the audit log for each line, it sends a request to the Reader to get a log line forwards the log line to the Parser for processing forwards the parsed data to the Detector for analysis prints any detected anomalies to the console How to Run Prerequisites: Docker and Docker Compose installed. Terminal 1 (keep running to see service logs): cd demo docker compose up reader parser detector Terminal 2 (run after services are up): cd demo docker compose up demo Directory Structure demo/Dockerfile : The Docker definition used by all services. demo/docker-compose.yml : Defines the multi-container application. demo/config/ : Contains YAML configuration files for Reader, Parser, and Detector. demo/data/ : Contains sample data (e.g., audit.log ) used by the Reader. demo/manual_demo_run_tcp.py : The Python script running inside the demo container that drives the flow.","title":"Running a Pipeline"},{"location":"pipeline/#running-the-docker-pipeline","text":"There is a containerized demonstration of the DetectMate log analysis pipeline. The demo runs three services (reader, parser, detector) that process audit logs to detect anomalies, with a test script that feeds log lines through the complete pipeline and reports detected anomalies. Each component runs in its own Docker container and the components communicate via TCP. This document explains how to run the example pipeline using Docker, located in the demo folder.","title":"Running the Docker Pipeline"},{"location":"pipeline/#components","text":"The pipeline consists of the following services defined in demo/docker-compose.yml : Reader ( detectmate_reader ) : reads log lines from a source file ( demo/data/audit.log ) uses demo/config/reader_config.yaml listens on internal port 8001 Parser ( detectmate_parser ) : receives raw log data, parses it into a structured format uses demo/config/parser_config.yaml listens on internal port 8011 depends on the Reader Detector ( detectmate_detector ) : analyzes structured logs to detect anomalies uses demo/config/detector_config.yaml listens on internal port 8021 depends on the Parser Demo Driver ( detectmate_demo ) : Acts as the orchestrator/client. It executes the demo/manual_demo_run_tcp.py script. It does the following: count lines in the audit log for each line, it sends a request to the Reader to get a log line forwards the log line to the Parser for processing forwards the parsed data to the Detector for analysis prints any detected anomalies to the console","title":"Components"},{"location":"pipeline/#how-to-run","text":"Prerequisites: Docker and Docker Compose installed. Terminal 1 (keep running to see service logs): cd demo docker compose up reader parser detector Terminal 2 (run after services are up): cd demo docker compose up demo","title":"How to Run"},{"location":"pipeline/#directory-structure","text":"demo/Dockerfile : The Docker definition used by all services. demo/docker-compose.yml : Defines the multi-container application. demo/config/ : Contains YAML configuration files for Reader, Parser, and Detector. demo/data/ : Contains sample data (e.g., audit.log ) used by the Reader. demo/manual_demo_run_tcp.py : The Python script running inside the demo container that drives the flow.","title":"Directory Structure"},{"location":"usage/","text":"Usage DetectMateService provides a command-line interface (CLI) detectmate to manage the service. Quick start your first Service To run a component with default settings only, you can use this command: detectmate start You should see output like: [2025-10-21 10:30:00] INFO core.abc123: Manager listening on ipc:///tmp/detectmate.cmd.ipc [2025-10-21 10:30:00] INFO core.abc123: engine started [2025-10-21 10:30:00] INFO core.abc123: setup_io: ready to process messages Create service settings To run the service with custom variables, we can define settings. For example, create a file named settings.yaml : component_name: my-first-service component_type: core # or use a library component like \"detectors.RandomDetector\" log_level: INFO log_dir: ./logs manager_addr: ipc:///tmp/detectmate.cmd.ipc engine_addr: ipc:///tmp/detectmate.engine.ipc Start the service with settings To start the service, use the start command. You can optionally specify a settings file and a component configuration file. detectmate start --settings settings.yaml --config config.yaml --settings : Path to the service settings YAML file. --config : Path to the component configuration YAML file. Checking status To check the status of a running service run: detectmate status --settings settings.yaml The --settings argument is required to know where to contact the service manager (via manager_addr ). Output: { \"status\": { \"component_type\": \"core\", \"component_id\": \"abc123...\", \"running\": true }, \"settings\": { \"component_name\": \"my-first-service\", \"log_level\": \"INFO\", ... }, \"configs\": {} } Reconfiguring You can update the component configuration of a running service without restarting it: detectmate reconfigure --settings settings.yaml --config new_config.yaml Add --persist to save the new configuration to the original config file (if supported). detectmate reconfigure --settings settings.yaml --config new_config.yaml --persist Stopping the service To stop the service: detectmate stop --settings settings.yaml","title":"Quick Start"},{"location":"usage/#usage","text":"DetectMateService provides a command-line interface (CLI) detectmate to manage the service.","title":"Usage"},{"location":"usage/#quick-start-your-first-service","text":"To run a component with default settings only, you can use this command: detectmate start You should see output like: [2025-10-21 10:30:00] INFO core.abc123: Manager listening on ipc:///tmp/detectmate.cmd.ipc [2025-10-21 10:30:00] INFO core.abc123: engine started [2025-10-21 10:30:00] INFO core.abc123: setup_io: ready to process messages","title":"Quick start your first Service"},{"location":"usage/#create-service-settings","text":"To run the service with custom variables, we can define settings. For example, create a file named settings.yaml : component_name: my-first-service component_type: core # or use a library component like \"detectors.RandomDetector\" log_level: INFO log_dir: ./logs manager_addr: ipc:///tmp/detectmate.cmd.ipc engine_addr: ipc:///tmp/detectmate.engine.ipc","title":"Create service settings"},{"location":"usage/#start-the-service-with-settings","text":"To start the service, use the start command. You can optionally specify a settings file and a component configuration file. detectmate start --settings settings.yaml --config config.yaml --settings : Path to the service settings YAML file. --config : Path to the component configuration YAML file.","title":"Start the service with settings"},{"location":"usage/#checking-status","text":"To check the status of a running service run: detectmate status --settings settings.yaml The --settings argument is required to know where to contact the service manager (via manager_addr ). Output: { \"status\": { \"component_type\": \"core\", \"component_id\": \"abc123...\", \"running\": true }, \"settings\": { \"component_name\": \"my-first-service\", \"log_level\": \"INFO\", ... }, \"configs\": {} }","title":"Checking status"},{"location":"usage/#reconfiguring","text":"You can update the component configuration of a running service without restarting it: detectmate reconfigure --settings settings.yaml --config new_config.yaml Add --persist to save the new configuration to the original config file (if supported). detectmate reconfigure --settings settings.yaml --config new_config.yaml --persist","title":"Reconfiguring"},{"location":"usage/#stopping-the-service","text":"To stop the service: detectmate stop --settings settings.yaml","title":"Stopping the service"}]}